/*!
 * Components.js v2.0.0
 * (c) 2020 compo.js@mail.ru
 * Released under the MIT License.
 */
!function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=19)}([function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(12),o=n(13),i=n(14),c=n(15);t.exports=function(t){return r(t)||o(t)||i(t)||c()}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var r=n(8);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(3),o=n(0);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(n,t){function r(t,e){return n.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.exports=r},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(e,t,n){var r=n(2),o=n(8),i=n(16),c=n(17);function a(t){var n="function"==typeof Map?new Map:void 0;return e.exports=a=function(t){if(null===t||!i(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return c(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},a(t)}e.exports=a},function(t,e,n){var r=n(9);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e,n){var r=n(9);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(r,t,e){var o=e(8),i=e(18);function c(t,e,n){return i()?r.exports=c=Reflect.construct:r.exports=c=function(t,e,n){var r=[null];r.push.apply(r,e);r=new(Function.bind.apply(t,r));return n&&o(r,n.prototype),r},c.apply(null,arguments)}r.exports=c},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}},function(t,e,n){"use strict";n.r(e);var r=n(4),i=n.n(r),e=n(5),c=n.n(e),r=n(6),o=n.n(r),e=n(2),a=n.n(e),r=n(1),u=n.n(r),e=n(3),l=n.n(e),r=n(10),s=n.n(r),e=n(0),f=n.n(e),r=n(11),e=n.n(r),r=n(7),n=n.n(r);function d(t){return 8===t.nodeType||3===t.nodeType&&!t.data.trim()?t.remove():(u()(t.childNodes).forEach(d),t)}var h=/^on/;function p(t){if(8===t.nodeType||3===t.nodeType&&!t.data.trim())return t.remove();if(2===t.nodeType||3===t.nodeType){var e;j.get(this).values.set(t,t[2===t.nodeType?"value":"data"]),2===t.nodeType&&(h.test(t.nodeName)?Object.defineProperty(t.ownerElement,"$data",{value:this.$data}):"data-for"===t.nodeName&&(e=new DocumentFragment,u()(d(t.ownerElement).childNodes).forEach(function(t){return e.append(t)}),j.get(this).values.set(t.ownerElement,e))),b.call(this,t)}else{if(t.attributes)for(var n=0,r=t.attributes.length;n<r;n++)p.call(this,t.attributes[n]);if(!t.attributes||!t.attributes["data-for"])for(var o=0;o<t.childNodes.length;o++)p.call(this,t.childNodes[o])||o--}return t}function y(t){if(2===t.nodeType||3===t.nodeType)b.call(this,t);else{if(t.attributes)for(var e=0,n=t.attributes.length;e<n;e++)y.call(this,t.attributes[e]);if(!t.attributes||!t.attributes["data-for"])for(var r=0,o=t.childNodes.length;r<o;r++)y.call(this,t.childNodes[r])}}function g(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var b=function(t){if(j.get(this).nodes.push(t),"data-hide"===t.nodeName)switch(j.get(this).execute.next("var{".concat(Object.keys(this.$data).join(","),"}=this; `${").concat(j.get(this).values.get(t),"}`")).value){case"false":case"undefined":case"null":case"0":case"-0":case"NaN":case"":t.ownerElement.removeAttribute("hidden");break;default:t.ownerElement.setAttribute("hidden","")}else if("data-for"===t.nodeName){j.get(this).cicles.set(t.ownerElement,0);var e=j.get(this).execute,n=e.next("var{".concat(Object.keys(this.$data).join(","),"}=this;")+"(function*(){yield arguments[0]=yield function*(){while(true)arguments[0]=yield eval(arguments[0])}.bind(this);"+"for(var ".concat(j.get(this).values.get(t),")yield arguments[0]()")+"}.bind(this))").value();j.get(this).execute=n.next().value(),j.get(this).execute.next(),n.next(function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j.get(this).cicles.get(t),n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:j.get(this).values.get(t);if(3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.childNodes[e])for(var r=0,o=n.childNodes.length;r<o;r++)y.call(this,t.childNodes[r+e]);else t.append(p.call(this,n.cloneNode(!0)));j.get(this).cicles.set(t,e+n.childNodes.length)}.bind(this,t.ownerElement));var r,o=g(n);try{for(o.s();!(r=o.n()).done;)r.value}catch(t){o.e(t)}finally{o.f()}j.get(this).execute=e;for(var i=j.get(this).cicles.get(t.ownerElement),c=t.ownerElement.childNodes.length;i<c;i++)t.ownerElement.lastChild.remove();j.get(this).cicles.delete(t)}else t[2===t.nodeType?"value":"data"]=j.get(this).execute.next("var{".concat(Object.keys(this.$data).join(","),"}=this; `").concat(j.get(this).values.get(t),"`")).value;return j.get(this).nodes.pop(),t},m=(r={},n()(r,Symbol.toPrimitive,function(){return this.valueOf()}),n()(r,"toString",function(){return this.valueOf()}),n()(r,"toJSON",function(){return this.valueOf()}),r);function w(i,c){var a=this;return{apply:function(t,e,n){return"toString"===t.name?JSON.stringify(e,null," "):t.apply(e,n)},get:function(t,e,n){if("toString"!==e&&!t.hasOwnProperty(e))return Reflect.get(t,e,n);j.get(a).nodes.length&&(c=j.get(a).nodes[0]),"object"===l()(i)&&c&&i.add(c);var r=Reflect.get(t,e,n),o=j.get(a).depends.get(t);return o||j.get(a).depends.set(t,o={}),o[e]||(o[e]=new Set),r&&"object"===l()(r)||"function"==typeof r?j.get(a).proxys.has(r)?j.get(a).proxys.get(r):x.call(a,r,o[e],c):j.get(a).nodes.length?Object.create(m,{valueOf:{value:function(){return o[e].add(c),r},writable:!0}}):r},set:function(t,e,n,r){if(t.hasOwnProperty(e)&&n===Reflect.get(t,e,r))return!0;if(!Reflect.set(t,e,n,r))return!1;if(j.get(a).nodes.length)return!0;t=j.get(a).depends.get(t);return t&&(i=t[e]||i)&&function(e){var n=this;e.forEach(function(t){clearTimeout(j.get(n).timers.get(t)),j.get(n).values.has(t)?j.get(n).timers.set(t,setTimeout(function(){return j.get(n).timers.delete(b.call(n,t))},0)):e.delete(t)})}.call(a,i),!0}}}function x(t,e,n){return j.get(this).proxys.set(t,new Proxy(t,w.call(this,e,n))).get(t)}function $(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:location,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e.href.replace(e.origin,"");t.forEach(function(t){new RegExp("^[/]?".concat(t.type,"$")).test(n)&&(Object.defineProperty(t,"target",{value:e,enumerable:!0,writable:!0}),document.dispatchEvent(t))})}function S(t){var e=this;j.get(this).values.delete(t),t.attributes&&u()(t.attributes).forEach(function(t){return S.call(e,t)}),t.childNodes&&t.childNodes.forEach(function(t){return S.call(e,t)})}function O(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=a()(n);return e=r?(t=a()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),o()(this,e)}}var j=new WeakMap,E={childList:!0,subtree:!0},N=function(t){c()(o,t);var n=O(o);function o(e){var r;i()(this,o),r=n.call(this),j.set(f()(r),{}),j.get(f()(r)).values=new WeakMap,j.get(f()(r)).timers=new WeakMap,j.get(f()(r)).depends=new WeakMap,j.get(f()(r)).proxys=new WeakMap,j.get(f()(r)).cicles=new WeakMap,j.get(f()(r)).object={},j.get(f()(r)).nodes=[],Object.defineProperty(f()(r),"$data",{value:new Proxy(x.call(f()(r),j.get(f()(r)).object),{get:function(t,e,n){return Reflect.has(t,e)?Reflect.get(t,e,n):Reflect.get(f()(r),e)}})}),Object.defineProperty(f()(r),"$root",{value:r.attachShadow({mode:e.hasAttribute("closed")?"closed":"open"})}),e=e.content?e.content:e,j.get(f()(r)).execute=Function("return function*(){while(true)arguments[0]=yield eval(arguments[0])}.bind(this)").call(r.$data)(),j.get(f()(r)).execute.next();var t=u()(e.querySelectorAll("script")).map(function(t){return e.removeChild(t).innerHTML}).join("");return u()(e.childNodes).forEach(function(t){return r.$root.append(t)}),j.get(f()(r)).execute.next(t),p.call(f()(r),r.$root),new MutationObserver(function(t,e){e.disconnect(),t.forEach(function(t){t.removedNodes.forEach(function(t){return S.call(f()(r),t)}),t.target.attributes&&t.target.attributes["data-for"]||u()(t.addedNodes).forEach(function(t){return p.call(f()(r),t)})}),e.observe(r.$root,E)}).observe(r.$root,E),r}return s()(o,[{key:"$",value:function(t){return this.$root.querySelector(t)}},{key:"$$",value:function(t){return this.$root.querySelectorAll(t)}},{key:"connectedCallback",value:function(){var e=this;j.get(this.$root.host).connected&&j.get(this.$root.host).connected.forEach(function(t){return t.call(e.$data)})}},{key:"$connected",value:function(){var e=this;j.get(this.$root.host).connected||(j.get(this.$root.host).connected=new Set);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){return j.get(e.$root.host).connected.add(t)})}},{key:"disconnectedCallback",value:function(){var e=this;j.get(this.$root.host).disconnected&&j.get(this.$root.host).disconnected.forEach(function(t){return t.call(e.$data)})}},{key:"$disconnected",value:function(){var e=this;j.get(this.$root.host).disconnected||(j.get(this.$root.host).disconnected=new Set);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){return j.get(e.$root.host).disconnected.add(t)})}},{key:"adoptedCallback",value:function(){var e=this;j.get(this.$root.host).adopted&&j.get(this.$root.host).adopted.forEach(function(t){return t.call(e.$data)})}},{key:"$adopted",value:function(){var e=this;j.get(this.$root.host).adopted||(j.get(this.$root.host).adopted=new Set);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){return j.get(e.$root.host).adopted.add(t)})}},{key:"$event",value:function(t,e){return new CustomEvent(t,e)}},{key:"$router",value:function(t,e){for(var n=arguments.length,r=new Array(2<n?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];window.addEventListener("popstate",function(){return $(r)}),t.addEventListener("click",function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t.path[0];e.origin!==location.origin||/\.\w+$/.test(e.href)||(t.preventDefault(),t.isTrusted&&history.pushState(null,"",e.href),$(r,e))},e),e&&"object"===l()(e)&&e.start&&$(r)}}]),o}(e()(HTMLElement));function A(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=a()(n);return e=r?(t=a()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),o()(this,e)}}e=document.querySelector("script[data-compo-name]");function k(t){var e=document.createElement("template");e.innerHTML=t,u()(e.content.children).forEach(function(r){return customElements.define((r.getAttribute("data-name")||r.getAttribute("name")||r.nodeName).toLocaleLowerCase(),function(t){c()(n,t);var e=A(n);function n(){return i()(this,n),e.call(this,r.cloneNode(!0))}return n}(N),r.hasAttribute("to")?{extends:r.getAttribute("to").toLocaleLowerCase()}:null)})}e?window[e.dataset.compoName]=k:window.Compo=k,Promise.all(u()(document.querySelectorAll("template[src],template[data-src]")).map(function(t){return fetch((t.attributes.src||t.attributes["data-src"]).value).then(function(t){return t.text()})})).then(function(t){return k(t.join(""))})}]);